import { createContext, useContext, useState, useEffect, type ReactNode } from "react";

export type Language = "fr" | "en" | "ar";

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
  isRTL: boolean;
}

const translations: Record<Language, Record<string, string>> = {
  fr: {
    "nav.products": "Produits",
    "nav.installations": "Installations",
    "nav.services": "Services",
    "nav.configurators": "Configurateurs",
    "nav.download": "Téléchargement",
    "nav.contact": "Contacts",
    "nav.speed_limiters": "Limiteurs de vitesse",
    "nav.door_operators": "Opérateurs de porte",
    "nav.led_components": "Composants LED",
    "nav.safety_systems": "Systèmes de sécurité",
    "nav.all_products": "Tous les produits",
    "nav.gearless_elevators": "Ascenseurs Gearless MRL",
    "nav.lift_platforms": "Plateformes élévatrices",
    "nav.custom_elevators": "Ascenseurs sur mesure",
    "nav.design": "Conception",
    "nav.tooling": "Outillage",
    "nav.stamping": "Découpage et moulage",
    "nav.configure_elevator": "Configurer ascenseur",
    "nav.configure_platform": "Configurer plateforme",
    "header.configure_elevator": "Configurer Ascenseur",
    "header.search_placeholder": "Rechercher des produits...",
    "footer.quick_links": "Liens rapides",
    "footer.products": "Produits",
    "footer.contacts": "Contacts",
    "footer.newsletter": "Newsletter",
    "footer.email_placeholder": "Votre email",
    "footer.about_us": "Qui sommes-nous",
    "footer.privacy": "Politique de confidentialité",
    "footer.cookies": "Politique des cookies",
    "footer.terms": "Termes et Conditions",
    "footer.rights_reserved": "Tous droits réservés.",
    "footer.description": "Depuis 1965, Prodlift conçoit et produit des ascenseurs, des plateformes élévatrices et des composants de haute qualité. Notre expérience et innovation nous rendent une référence dans le secteur des ascenseurs.",
    "footer.opening_hours": "Heures d'ouverture",
    "footer.sunday_thursday": "Dimanche - Jeudi: 8h00 - 17h00",
    "footer.friday_saturday": "Vendredi et Samedi: Fermé",
    "footer.speed_limiters": "Limiteurs de vitesse",
    "footer.door_operators": "Opérateurs de porte",
    "footer.led_components": "Composants LED",
    "footer.safety_systems": "Systèmes de sécurité",
    "footer.lift_platforms": "Plateformes élévatrices",
    "catalog.title": "Catalogue de produits",
    "catalog.subtitle": "Découvrez notre gamme complète de composants et pièces de rechange pour ascenseurs",
    "catalog.search_placeholder": "Rechercher des produits par nom ou code...",
    "catalog.all_categories": "Toutes les catégories",
    "catalog.sort_by": "Trier par",
    "catalog.name": "Nom",
    "catalog.code": "Code",
    "catalog.products_found": "produits trouvés",
    "catalog.no_products": "Aucun produit trouvé pour la recherche",
    "catalog.reset_filters": "Réinitialiser les filtres",
    "catalog.view_details": "Voir détails",
    "contact.title": "Contactez-nous",
    "contact.subtitle": "Nous sommes là pour vous aider",
    "downloads.title": "Espace Téléchargement",
    "downloads.subtitle": "Téléchargez catalogues, fiches techniques et documentation",
    "downloads.no_documents": "Aucun document disponible pour le moment.",
    "home.hero.title": "NOUVEAUX LIMITEURS DE VITESSE BIDIRECTIONNELS",
    "home.hero.subtitle": "Prodlift",
    "home.hero.description": "Prodlift, conçoit en toute sécurité des systèmes d'ascenseurs",
    "home.hero.learn_more": "En savoir plus",
    "home.hero.configure_cabin": "Configurer la cabine",
    "common.home": "Accueil",
    "common.loading": "Chargement...",
    "common.error": "Erreur",
    "common.back": "Retour",
    "common.submit": "Envoyer",
    "common.cancel": "Annuler",
    "common.save": "Enregistrer",
    "common.delete": "Supprimer",
    "common.edit": "Modifier",
    "common.view": "Voir",
    "common.close": "Fermer",
    "admin.login": "Se connecter",
    "admin.username": "Nom d'utilisateur",
    "admin.password": "Mot de passe",
    "admin.login_success": "Connexion réussie",
    "admin.login_error": "Erreur de connexion",
    "downloads.category.catalogs": "Catalogues Produits",
    "downloads.category.datasheets": "Fiches Techniques",
    "downloads.category.certifications": "Certifications",
    "downloads.category.manuals": "Manuels Techniques",
    "downloads.category.other": "Autres Documents",
    "downloads.documents_available": "documents disponibles",
    "downloads.error_loading": "Erreur lors du chargement des documents. Veuillez réessayer.",
    "downloads.not_found": "Vous ne trouvez pas ce que vous cherchez ?",
    "downloads.contact_for_docs": "Contactez-nous pour demander une documentation spécifique ou personnalisée pour votre projet.",
    "downloads.contact_us": "Contactez-nous",
    "configurator.selected": "Sélectionné",
    "configurator.not_selected": "Non sélectionné",
    "configurator.none": "Aucune",
    "configurator.summary": "Résumé",
    "configurator.config_summary": "Résumé de la configuration",
    "configurator.config_ready": "Votre configuration est prête ! Envoyez une demande pour recevoir un devis personnalisé.",
    "configurator.request_quote": "Demander un devis",
    "configurator.next": "Suivant",
    "configurator.back": "Retour",
    "elevator.configurator": "Configurateur d'ascenseur",
    "elevator.configure_title": "Configurez votre ascenseur",
    "elevator.configure_subtitle": "Personnalisez chaque détail de votre ascenseur en quelques étapes simples",
    "elevator.step.cabin_type": "Type de cabine",
    "elevator.step.capacity": "Capacité",
    "elevator.step.door": "Porte",
    "elevator.step.finish": "Finitions",
    "elevator.step.lighting": "Éclairage",
    "elevator.step.control_panel": "Panneau de commande",
    "elevator.config_preview": "Aperçu de la configuration",
    "platform.configurator": "Configurateur de plateforme",
    "platform.configure_title": "Configurez votre plateforme",
    "platform.configure_subtitle": "Concevez la solution parfaite pour l'accessibilité en quelques étapes",
    "platform.step.type": "Type de plateforme",
    "platform.step.capacity": "Capacité",
    "platform.step.height": "Hauteur",
    "platform.step.installation": "Installation",
    "platform.step.ramp": "Rampe",
    "platform.step.safety": "Sécurité",
    "platform.indoor": "Intérieur",
    "platform.outdoor": "Extérieur",
    "platform.indoor_install": "Installation en intérieur",
    "platform.outdoor_weather": "Résistant aux intempéries",
    "platform.select_safety": "Sélectionnez les fonctionnalités de sécurité souhaitées (au moins une)",
    "platform.travel_height": "Hauteur de course",
    "platform.ramp_type": "Type de rampe",
    "platform.config_preview": "Aperçu de la plateforme",
    "legal.not_found": "Page non trouvée",
    "legal.back_home": "Retour à l'accueil",
    "catalog.featured": "En vedette",
    "contact.send_message": "Envoyer un message",
    "contact.message_sent": "Message envoyé !",
    "contact.message_sent_desc": "Merci de nous avoir contactés. Nous vous répondrons dès que possible.",
    "contact.send_another": "Envoyer un autre message",
    "contact.sending": "Envoi en cours...",
    "contact.send_button": "Envoyer le message",
    "contact.form.name": "Nom",
    "contact.form.name_required": "Nom *",
    "contact.form.name_placeholder": "Votre nom",
    "contact.form.email": "Email",
    "contact.form.email_required": "Email *",
    "contact.form.email_placeholder": "Votre email",
    "contact.form.phone": "Téléphone",
    "contact.form.phone_placeholder": "Votre numéro",
    "contact.form.company": "Entreprise",
    "contact.form.company_placeholder": "Nom de l'entreprise",
    "contact.form.subject": "Sujet",
    "contact.form.subject_required": "Sujet *",
    "contact.form.subject_placeholder": "Sélectionnez un sujet",
    "contact.form.message": "Message",
    "contact.form.message_required": "Message *",
    "contact.form.message_placeholder": "Écrivez votre message...",
    "contact.subject.product_info": "Informations produit",
    "contact.subject.quote": "Demande de devis",
    "contact.subject.support": "Assistance technique",
    "contact.subject.partnership": "Collaboration commerciale",
    "contact.subject.other": "Autre",
    "contact.info_title": "Informations de contact",
    "contact.opening_hours": "Heures d'ouverture",
    "contact.sun_thu": "Dim - Jeu",
    "contact.fri_sat": "Ven - Sam",
    "contact.closed": "Fermé",
    "contact.urgent_help": "Besoin d'une assistance urgente ?",
    "contact.urgent_desc": "Notre équipe de support technique est disponible pour vous aider.",
    "contact.call_now": "Appelez-nous maintenant",
    "contact.address": "Adresse",
    "contact.available_help": "Nous sommes à votre disposition pour toute information ou demande",
    "contact.product_request": "Demande d'informations pour le produit",
    "contact.toast_success_title": "Message envoyé !",
    "contact.toast_success_desc": "Nous vous répondrons dès que possible.",
    "contact.toast_error_title": "Erreur",
    "contact.toast_error_desc": "Une erreur s'est produite. Veuillez réessayer plus tard.",
  },
  en: {
    "nav.products": "Products",
    "nav.installations": "Installations",
    "nav.services": "Services",
    "nav.configurators": "Configurators",
    "nav.download": "Download",
    "nav.contact": "Contact",
    "nav.speed_limiters": "Speed Limiters",
    "nav.door_operators": "Door Operators",
    "nav.led_components": "LED Components",
    "nav.safety_systems": "Safety Systems",
    "nav.all_products": "All Products",
    "nav.gearless_elevators": "Gearless MRL Elevators",
    "nav.lift_platforms": "Lift Platforms",
    "nav.custom_elevators": "Custom Elevators",
    "nav.design": "Design",
    "nav.tooling": "Tooling",
    "nav.stamping": "Stamping & Molding",
    "nav.configure_elevator": "Configure Elevator",
    "nav.configure_platform": "Configure Platform",
    "header.configure_elevator": "Configure Elevator",
    "header.search_placeholder": "Search products...",
    "footer.quick_links": "Quick Links",
    "footer.products": "Products",
    "footer.contacts": "Contact",
    "footer.newsletter": "Newsletter",
    "footer.email_placeholder": "Your email",
    "footer.about_us": "About Us",
    "footer.privacy": "Privacy Policy",
    "footer.cookies": "Cookie Policy",
    "footer.terms": "Terms & Conditions",
    "footer.rights_reserved": "All rights reserved.",
    "footer.description": "Since 1965, Prodlift has been designing and producing elevators, lift platforms and high-quality components. Our experience and innovation make us a reference in the elevator sector.",
    "footer.opening_hours": "Opening Hours",
    "footer.sunday_thursday": "Sunday - Thursday: 8:00 AM - 5:00 PM",
    "footer.friday_saturday": "Friday & Saturday: Closed",
    "footer.speed_limiters": "Speed Limiters",
    "footer.door_operators": "Door Operators",
    "footer.led_components": "LED Components",
    "footer.safety_systems": "Safety Systems",
    "footer.lift_platforms": "Lift Platforms",
    "catalog.title": "Product Catalog",
    "catalog.subtitle": "Discover our complete range of elevator components and spare parts",
    "catalog.search_placeholder": "Search products by name or code...",
    "catalog.all_categories": "All Categories",
    "catalog.sort_by": "Sort by",
    "catalog.name": "Name",
    "catalog.code": "Code",
    "catalog.products_found": "products found",
    "catalog.no_products": "No products found for search",
    "catalog.reset_filters": "Reset Filters",
    "catalog.view_details": "View Details",
    "contact.title": "Contact Us",
    "contact.subtitle": "We're here to help",
    "downloads.title": "Download Center",
    "downloads.subtitle": "Download catalogs, datasheets and documentation",
    "downloads.no_documents": "No documents available at this time.",
    "home.hero.title": "NEW BIDIRECTIONAL SPEED LIMITERS",
    "home.hero.subtitle": "Prodlift",
    "home.hero.description": "Prodlift designs elevator systems safely",
    "home.hero.learn_more": "Learn More",
    "home.hero.configure_cabin": "Configure Cabin",
    "common.home": "Home",
    "common.loading": "Loading...",
    "common.error": "Error",
    "common.back": "Back",
    "common.submit": "Submit",
    "common.cancel": "Cancel",
    "common.save": "Save",
    "common.delete": "Delete",
    "common.edit": "Edit",
    "common.view": "View",
    "common.close": "Close",
    "admin.login": "Login",
    "admin.username": "Username",
    "admin.password": "Password",
    "admin.login_success": "Login successful",
    "admin.login_error": "Login error",
    "downloads.category.catalogs": "Product Catalogs",
    "downloads.category.datasheets": "Technical Datasheets",
    "downloads.category.certifications": "Certifications",
    "downloads.category.manuals": "Technical Manuals",
    "downloads.category.other": "Other Documents",
    "downloads.documents_available": "documents available",
    "downloads.error_loading": "Error loading documents. Please try again.",
    "downloads.not_found": "Can't find what you're looking for?",
    "downloads.contact_for_docs": "Contact us to request specific or customized documentation for your project.",
    "downloads.contact_us": "Contact Us",
    "configurator.selected": "Selected",
    "configurator.not_selected": "Not selected",
    "configurator.none": "None",
    "configurator.summary": "Summary",
    "configurator.config_summary": "Configuration Summary",
    "configurator.config_ready": "Your configuration is ready! Submit a request to receive a personalized quote.",
    "configurator.request_quote": "Request Quote",
    "configurator.next": "Next",
    "configurator.back": "Back",
    "elevator.configurator": "Elevator Configurator",
    "elevator.configure_title": "Configure Your Elevator",
    "elevator.configure_subtitle": "Customize every detail of your elevator in a few simple steps",
    "elevator.step.cabin_type": "Cabin Type",
    "elevator.step.capacity": "Capacity",
    "elevator.step.door": "Door",
    "elevator.step.finish": "Finishes",
    "elevator.step.lighting": "Lighting",
    "elevator.step.control_panel": "Control Panel",
    "elevator.config_preview": "Configuration Preview",
    "platform.configurator": "Platform Configurator",
    "platform.configure_title": "Configure Your Platform",
    "platform.configure_subtitle": "Design the perfect accessibility solution in a few steps",
    "platform.step.type": "Platform Type",
    "platform.step.capacity": "Capacity",
    "platform.step.height": "Height",
    "platform.step.installation": "Installation",
    "platform.step.ramp": "Ramp",
    "platform.step.safety": "Safety",
    "platform.indoor": "Indoor",
    "platform.outdoor": "Outdoor",
    "platform.indoor_install": "Indoor installation",
    "platform.outdoor_weather": "Weather resistant",
    "platform.select_safety": "Select the desired safety features (at least one)",
    "platform.travel_height": "Travel Height",
    "platform.ramp_type": "Ramp Type",
    "platform.config_preview": "Platform Preview",
    "legal.not_found": "Page not found",
    "legal.back_home": "Back to home",
    "catalog.featured": "Featured",
    "contact.send_message": "Send a message",
    "contact.message_sent": "Message sent!",
    "contact.message_sent_desc": "Thank you for contacting us. We will reply as soon as possible.",
    "contact.send_another": "Send another message",
    "contact.sending": "Sending...",
    "contact.send_button": "Send message",
    "contact.form.name": "Name",
    "contact.form.name_required": "Name *",
    "contact.form.name_placeholder": "Your name",
    "contact.form.email": "Email",
    "contact.form.email_required": "Email *",
    "contact.form.email_placeholder": "Your email",
    "contact.form.phone": "Phone",
    "contact.form.phone_placeholder": "Your number",
    "contact.form.company": "Company",
    "contact.form.company_placeholder": "Company name",
    "contact.form.subject": "Subject",
    "contact.form.subject_required": "Subject *",
    "contact.form.subject_placeholder": "Select a subject",
    "contact.form.message": "Message",
    "contact.form.message_required": "Message *",
    "contact.form.message_placeholder": "Write your message...",
    "contact.subject.product_info": "Product information",
    "contact.subject.quote": "Quote request",
    "contact.subject.support": "Technical support",
    "contact.subject.partnership": "Business partnership",
    "contact.subject.other": "Other",
    "contact.info_title": "Contact information",
    "contact.opening_hours": "Opening hours",
    "contact.sun_thu": "Sun - Thu",
    "contact.fri_sat": "Fri - Sat",
    "contact.closed": "Closed",
    "contact.urgent_help": "Need urgent assistance?",
    "contact.urgent_desc": "Our technical support team is available to help you.",
    "contact.call_now": "Call us now",
    "contact.address": "Address",
    "contact.available_help": "We are here to help with any questions or requests",
    "contact.product_request": "Information request for product",
    "contact.toast_success_title": "Message sent!",
    "contact.toast_success_desc": "We will reply as soon as possible.",
    "contact.toast_error_title": "Error",
    "contact.toast_error_desc": "An error occurred. Please try again later.",
  },
  ar: {
    "nav.products": "المنتجات",
    "nav.installations": "التركيبات",
    "nav.services": "الخدمات",
    "nav.configurators": "المُكوِّنات",
    "nav.download": "التحميل",
    "nav.contact": "اتصل بنا",
    "nav.speed_limiters": "محددات السرعة",
    "nav.door_operators": "مشغلات الأبواب",
    "nav.led_components": "مكونات LED",
    "nav.safety_systems": "أنظمة السلامة",
    "nav.all_products": "جميع المنتجات",
    "nav.gearless_elevators": "مصاعد Gearless MRL",
    "nav.lift_platforms": "منصات الرفع",
    "nav.custom_elevators": "مصاعد مخصصة",
    "nav.design": "التصميم",
    "nav.tooling": "الأدوات",
    "nav.stamping": "الختم والقولبة",
    "nav.configure_elevator": "تكوين المصعد",
    "nav.configure_platform": "تكوين المنصة",
    "header.configure_elevator": "تكوين المصعد",
    "header.search_placeholder": "البحث عن المنتجات...",
    "footer.quick_links": "روابط سريعة",
    "footer.products": "المنتجات",
    "footer.contacts": "اتصل بنا",
    "footer.newsletter": "النشرة الإخبارية",
    "footer.email_placeholder": "بريدك الإلكتروني",
    "footer.about_us": "من نحن",
    "footer.privacy": "سياسة الخصوصية",
    "footer.cookies": "سياسة ملفات تعريف الارتباط",
    "footer.terms": "الشروط والأحكام",
    "footer.rights_reserved": "جميع الحقوق محفوظة.",
    "footer.description": "منذ عام 1965، تقوم Prodlift بتصميم وإنتاج المصاعد ومنصات الرفع والمكونات عالية الجودة. خبرتنا وابتكارنا يجعلاننا مرجعاً في قطاع المصاعد.",
    "footer.opening_hours": "ساعات العمل",
    "footer.sunday_thursday": "الأحد - الخميس: 8:00 ص - 5:00 م",
    "footer.friday_saturday": "الجمعة والسبت: مغلق",
    "footer.speed_limiters": "محددات السرعة",
    "footer.door_operators": "مشغلات الأبواب",
    "footer.led_components": "مكونات LED",
    "footer.safety_systems": "أنظمة السلامة",
    "footer.lift_platforms": "منصات الرفع",
    "catalog.title": "كتالوج المنتجات",
    "catalog.subtitle": "اكتشف مجموعتنا الكاملة من مكونات المصاعد وقطع الغيار",
    "catalog.search_placeholder": "البحث عن المنتجات بالاسم أو الرمز...",
    "catalog.all_categories": "جميع الفئات",
    "catalog.sort_by": "ترتيب حسب",
    "catalog.name": "الاسم",
    "catalog.code": "الرمز",
    "catalog.products_found": "منتجات موجودة",
    "catalog.no_products": "لم يتم العثور على منتجات للبحث",
    "catalog.reset_filters": "إعادة تعيين الفلاتر",
    "catalog.view_details": "عرض التفاصيل",
    "contact.title": "اتصل بنا",
    "contact.subtitle": "نحن هنا لمساعدتك",
    "downloads.title": "مركز التحميل",
    "downloads.subtitle": "تحميل الكتالوجات والمواصفات والوثائق",
    "downloads.no_documents": "لا توجد مستندات متاحة في الوقت الحالي.",
    "home.hero.title": "محددات سرعة ثنائية الاتجاه جديدة",
    "home.hero.subtitle": "برودليفت",
    "home.hero.description": "تصمم Prodlift أنظمة المصاعد بأمان",
    "home.hero.learn_more": "اعرف المزيد",
    "home.hero.configure_cabin": "تكوين الكابينة",
    "common.home": "الرئيسية",
    "common.loading": "جاري التحميل...",
    "common.error": "خطأ",
    "common.back": "رجوع",
    "common.submit": "إرسال",
    "common.cancel": "إلغاء",
    "common.save": "حفظ",
    "common.delete": "حذف",
    "common.edit": "تعديل",
    "common.view": "عرض",
    "common.close": "إغلاق",
    "admin.login": "تسجيل الدخول",
    "admin.username": "اسم المستخدم",
    "admin.password": "كلمة المرور",
    "admin.login_success": "تم تسجيل الدخول بنجاح",
    "admin.login_error": "خطأ في تسجيل الدخول",
    "downloads.category.catalogs": "كتالوجات المنتجات",
    "downloads.category.datasheets": "أوراق البيانات التقنية",
    "downloads.category.certifications": "الشهادات",
    "downloads.category.manuals": "الأدلة التقنية",
    "downloads.category.other": "وثائق أخرى",
    "downloads.documents_available": "وثائق متاحة",
    "downloads.error_loading": "خطأ في تحميل المستندات. يرجى المحاولة مرة أخرى.",
    "downloads.not_found": "لم تجد ما تبحث عنه؟",
    "downloads.contact_for_docs": "تواصل معنا لطلب وثائق محددة أو مخصصة لمشروعك.",
    "downloads.contact_us": "تواصل معنا",
    "configurator.selected": "تم الاختيار",
    "configurator.not_selected": "غير محدد",
    "configurator.none": "لا شيء",
    "configurator.summary": "ملخص",
    "configurator.config_summary": "ملخص التكوين",
    "configurator.config_ready": "تكوينك جاهز! أرسل طلبًا للحصول على عرض أسعار مخصص.",
    "configurator.request_quote": "طلب عرض أسعار",
    "configurator.next": "التالي",
    "configurator.back": "رجوع",
    "elevator.configurator": "مُكوِّن المصعد",
    "elevator.configure_title": "قم بتكوين مصعدك",
    "elevator.configure_subtitle": "خصص كل تفاصيل مصعدك في بضع خطوات بسيطة",
    "elevator.step.cabin_type": "نوع الكابينة",
    "elevator.step.capacity": "السعة",
    "elevator.step.door": "الباب",
    "elevator.step.finish": "التشطيبات",
    "elevator.step.lighting": "الإضاءة",
    "elevator.step.control_panel": "لوحة التحكم",
    "elevator.config_preview": "معاينة التكوين",
    "platform.configurator": "مُكوِّن المنصة",
    "platform.configure_title": "قم بتكوين منصتك",
    "platform.configure_subtitle": "صمم الحل الأمثل لإمكانية الوصول في بضع خطوات",
    "platform.step.type": "نوع المنصة",
    "platform.step.capacity": "السعة",
    "platform.step.height": "الارتفاع",
    "platform.step.installation": "التركيب",
    "platform.step.ramp": "المنحدر",
    "platform.step.safety": "السلامة",
    "platform.indoor": "داخلي",
    "platform.outdoor": "خارجي",
    "platform.indoor_install": "تركيب داخلي",
    "platform.outdoor_weather": "مقاوم للطقس",
    "platform.select_safety": "اختر ميزات السلامة المطلوبة (واحدة على الأقل)",
    "platform.travel_height": "ارتفاع المسار",
    "platform.ramp_type": "نوع المنحدر",
    "platform.config_preview": "معاينة المنصة",
    "legal.not_found": "الصفحة غير موجودة",
    "legal.back_home": "العودة للرئيسية",
    "catalog.featured": "مميز",
    "contact.send_message": "إرسال رسالة",
    "contact.message_sent": "تم إرسال الرسالة!",
    "contact.message_sent_desc": "شكراً لتواصلك معنا. سنرد عليك في أقرب وقت ممكن.",
    "contact.send_another": "إرسال رسالة أخرى",
    "contact.sending": "جاري الإرسال...",
    "contact.send_button": "إرسال الرسالة",
    "contact.form.name": "الاسم",
    "contact.form.name_required": "الاسم *",
    "contact.form.name_placeholder": "اسمك",
    "contact.form.email": "البريد الإلكتروني",
    "contact.form.email_required": "البريد الإلكتروني *",
    "contact.form.email_placeholder": "بريدك الإلكتروني",
    "contact.form.phone": "الهاتف",
    "contact.form.phone_placeholder": "رقمك",
    "contact.form.company": "الشركة",
    "contact.form.company_placeholder": "اسم الشركة",
    "contact.form.subject": "الموضوع",
    "contact.form.subject_required": "الموضوع *",
    "contact.form.subject_placeholder": "اختر موضوعاً",
    "contact.form.message": "الرسالة",
    "contact.form.message_required": "الرسالة *",
    "contact.form.message_placeholder": "اكتب رسالتك...",
    "contact.subject.product_info": "معلومات المنتج",
    "contact.subject.quote": "طلب عرض سعر",
    "contact.subject.support": "الدعم الفني",
    "contact.subject.partnership": "شراكة تجارية",
    "contact.subject.other": "أخرى",
    "contact.info_title": "معلومات الاتصال",
    "contact.opening_hours": "ساعات العمل",
    "contact.sun_thu": "الأحد - الخميس",
    "contact.fri_sat": "الجمعة - السبت",
    "contact.closed": "مغلق",
    "contact.urgent_help": "هل تحتاج مساعدة عاجلة؟",
    "contact.urgent_desc": "فريق الدعم الفني لدينا متاح لمساعدتك.",
    "contact.call_now": "اتصل بنا الآن",
    "contact.address": "العنوان",
    "contact.available_help": "نحن هنا لمساعدتك في أي استفسار أو طلب",
    "contact.product_request": "طلب معلومات للمنتج",
    "contact.toast_success_title": "تم إرسال الرسالة!",
    "contact.toast_success_desc": "سنرد عليك في أقرب وقت ممكن.",
    "contact.toast_error_title": "خطأ",
    "contact.toast_error_desc": "حدث خطأ. يرجى المحاولة مرة أخرى لاحقاً.",
  },
};

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export function LanguageProvider({ children }: { children: ReactNode }) {
  const [language, setLanguageState] = useState<Language>(() => {
    if (typeof window !== "undefined") {
      const saved = localStorage.getItem("prodlift-language");
      if (saved && (saved === "fr" || saved === "en" || saved === "ar")) {
        return saved as Language;
      }
    }
    return "fr";
  });

  const setLanguage = (lang: Language) => {
    setLanguageState(lang);
    localStorage.setItem("prodlift-language", lang);
  };

  const t = (key: string): string => {
    return translations[language][key] || key;
  };

  const isRTL = language === "ar";

  useEffect(() => {
    document.documentElement.dir = isRTL ? "rtl" : "ltr";
    document.documentElement.lang = language;
  }, [language, isRTL]);

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t, isRTL }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error("useLanguage must be used within a LanguageProvider");
  }
  return context;
}

export function LanguageSelector() {
  const { language, setLanguage } = useLanguage();

  const languages: { code: Language; name: string; flag: string }[] = [
    { code: "fr", name: "Français", flag: "FR" },
    { code: "en", name: "English", flag: "EN" },
    { code: "ar", name: "العربية", flag: "AR" },
  ];

  return (
    <div className="flex items-center gap-1">
      {languages.map((lang) => (
        <button
          key={lang.code}
          onClick={() => setLanguage(lang.code)}
          className={`px-2 py-1 text-xs font-medium rounded transition-colors ${
            language === lang.code
              ? "bg-primary-foreground/20 text-primary-foreground"
              : "text-primary-foreground/70 hover:text-primary-foreground hover:bg-primary-foreground/10"
          }`}
          data-testid={`button-lang-${lang.code}`}
        >
          {lang.flag}
        </button>
      ))}
    </div>
  );
}
